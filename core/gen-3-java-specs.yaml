tasks:

  - output-dir: ./gen-3/java-container
    description: "Java support via Docker container"
    prompt: |
        
        Rewrite gen-2.py and llm_client.py in Java
        
        package name: org.riip.gen3

        Create a pom.xml file with the following dependencies:
        - Java 21 
        - Jackson 2.17.2
        - JUnit 5.11.3
        - org.yaml:snakeyaml:2.2

        Use SDKv2 (package: software.amazon.awssdk) instead of SDKv1 (com.amazonaws.services) in the code.
        DO NOT use Spring, Springboot, or any other similar heavy-handed frameworks.
        Prefer Records over Classes where possible. Prefer Streams over loops. Shorten symbol names.
        Move the self-test functionality to a separate integration test that runs in Maven.

        A Dockerfile is already provided.

    inputs: [ gen-2.py, llm_client.py ]
    lang: java
    hardcoded:
      - path: Dockerfile
        content: |
          FROM public.ecr.aws/docker/library/maven:3.9.9-amazoncorretto-21-alpine
          WORKDIR /app
          COPY pom.xml .
          RUN mvn dependency:go-offline -B -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn

          COPY src ./src
          RUN mvn verify -B -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn < /dev/null
