tasks:

  - output-dir: ./gen-3/rust-container
    description: "Rust support via Docker container"
    prompt: |
      Rewrite gen-2.py and llm_client.py in Rust
      
      package name: riip_gen3

      Create a Cargo.toml file with the following dependencies:
      - tokio = { version = "1.4", features = ["full"] }
      - aws-sdk-rust = "0.0.21"
      - serde = { version = "1.0", features = ["derive"] }
      - serde_json = "1.0"

      Use the aws-sdk-rust crate for interacting with AWS services.
      Use async/await for handling asynchronous operations.
      Prefer structs over classes. Use serde for JSON serialization and deserialization.
      Write unit tests using the built-in testing framework.

      A Dockerfile is already provided.

    inputs: [ gen-2.py, llm_client.py ]
    lang: rust
    hardcoded:
      - path: Dockerfile
        content: |
          FROM public.ecr.aws/docker/library/rust:alpine3.20
          WORKDIR /app
          COPY . .
          RUN cargo test
          RUN cargo build --release
          CMD ["./target/release/riip_gen3"]